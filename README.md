# 唤醒闹钟 (WakeUp Alarm)

一个创新的闹钟应用，要求用户通过摇晃手机来关闭闹钟，并通过模拟惩罚机制帮助用户建立健康的起床习惯。

## 🎯 项目概述

这是一个完整的MVP版本，包含完整的闹钟功能：
- ✅ 闹钟设置和保存
- ✅ 摇晃关闭闹钟机制
- ✅ 贪睡惩罚系统
- ✅ 起床习惯统计
- ✅ 数据持久化存储

## 🚀 快速开始

### 前置条件
- Node.js (版本 16+)
- npm 或 yarn
- Expo CLI
- 手机安装 Expo Go 应用

### 安装和运行

1. 安装依赖
```bash
npm install
```

2. 启动开发服务器
```bash
npm start
# 或
expo start
```

3. 在手机上打开 Expo Go，扫描二维码即可运行应用

## 📱 功能特性

### ✅ 核心功能（已完成）
- [x] **闹钟设置**: 时间选择、触发方式、难度设置
- [x] **智能保存**: 自动保存闹钟配置到本地存储
- [x] **摇晃检测**: 使用设备陀螺仪检测摇晃动作
- [x] **贪睡惩罚**: 贪睡次数统计和模拟扣款机制
- [x] **起床统计**: 记录起床成功率、贪睡次数等数据
- [x] **实时显示**: 主页面实时显示闹钟状态和倒计时

### ✅ 基础架构（已完成）
- [x] 项目基础架构和配置
- [x] React Navigation 导航系统
- [x] 全局样式系统
- [x] 可复用组件库
- [x] AsyncStorage 数据持久化
- [x] 完整的业务逻辑服务层

## 🏗️ 项目结构

```
├── src/
│   ├── components/          # 可复用组件
│   │   ├── Button.js
│   │   ├── TimePicker.js
│   │   └── SensorSettings.js
│   ├── screens/            # 页面组件
│   │   ├── HomeScreen.js    # 主页面 - 显示闹钟状态和统计
│   │   ├── SetAlarmScreen.js # 设置闹钟页面
│   │   ├── TriggerScreen.js # 闹钟触发页面 - 摇晃关闭
│   │   └── StatsScreen.js   # 统计页面
│   ├── services/           # 业务逻辑服务
│   │   ├── alarmService.js  # 闹钟核心逻辑
│   │   ├── storageService.js # 数据持久化
│   │   ├── statsService.js  # 统计服务
│   │   └── penaltyService.js # 惩罚机制
│   ├── hooks/              # 自定义Hook
│   │   └── useShakeDetection.js # 摇晃检测Hook
│   ├── utils/              # 工具函数
│   │   ├── constants.js     # 应用常量
│   │   ├── timeUtils.js     # 时间处理工具
│   │   └── validators.js    # 数据验证工具
│   └── styles/             # 样式文件
│       └── globalStyles.js
├── assets/                 # 静态资源
│   └── alarm.mp3           # 闹钟音效
├── App.js                  # 应用入口
└── package.json
```

## 🔧 技术栈

- **框架**: React Native (Expo)
- **导航**: React Navigation 6
- **存储**: AsyncStorage (数据持久化)
- **传感器**: expo-sensors (陀螺仪摇晃检测)
- **音频**: expo-av (闹钟音效播放)
- **状态管理**: React Hooks (useState, useEffect, useFocusEffect)
- **样式**: StyleSheet (响应式设计)

## 📝 开发历程

### 阶段1: 项目初始化 ✅
- ✅ 项目搭建和基础配置
- ✅ React Navigation 导航系统
- ✅ 全局样式系统搭建

### 阶段2: 数据层建设 ✅
- ✅ AsyncStorage 存储服务
- ✅ 数据模型设计
- ✅ 数据验证和清理机制

### 阶段3: 闹钟核心功能 ✅
- ✅ 闹钟设置界面
- ✅ 时间选择器组件
- ✅ 闹钟数据保存和读取

### 阶段4: 传感器集成 ✅
- ✅ 陀螺仪摇晃检测
- ✅ 自定义摇晃检测Hook
- ✅ 触发页面交互逻辑

### 阶段5: 音效系统 ✅
- ✅ expo-av 音频播放
- ✅ 闹钟音效集成
- ✅ 音效控制逻辑

### 阶段6: 贪睡惩罚机制 ✅
- ✅ 贪睡计数和限制
- ✅ 模拟扣款惩罚系统
- ✅ 惩罚数据持久化

### 阶段7: 统计功能 ✅
- ✅ 起床成功率统计
- ✅ 贪睡行为分析
- ✅ 历史数据展示

### 阶段8: 应用完善 ✅
- ✅ 主页面状态显示
- ✅ 数据同步和刷新
- ✅ 错误处理和用户反馈
- ✅ 最终测试和优化

## 🧪 功能测试

### 可测试的完整功能：
- [x] **应用启动**: 正常启动和页面加载
- [x] **导航系统**: 各页面间正常跳转
- [x] **闹钟设置**: 时间选择、配置保存
- [x] **摇晃检测**: 手机摇晃动作识别
- [x] **音效播放**: 闹钟音效正常播放
- [x] **数据持久化**: 闹钟和统计数据保存
- [x] **状态显示**: 主页面实时状态更新
- [x] **贪睡功能**: 贪睡计数和惩罚机制
- [x] **统计功能**: 历史数据查看和分析

### 测试步骤：
1. 启动应用：`npm start`
2. 设置一个闹钟（建议设置为1-2分钟后）
3. 返回主页面验证闹钟显示
4. 等待闹钟触发，体验摇晃关闭
5. 查看统计页面数据更新

## 📱 支持平台

- ✅ iOS
- ✅ Android
- ⚠️ Web (基础支持)

## 🐛 已知问题

- Web端传感器支持有限（摇晃检测仅在移动设备上有效）
- 部分旧设备可能存在音效播放延迟
- 后台运行时闹钟调度依赖系统支持

## 🎯 核心亮点

### 创新功能
- **摇晃关闭**: 必须通过摇晃手机来关闭闹钟，防止半睡半醒状态下随意关闭
- **贪睡惩罚**: 每次贪睡都会产生"扣款"，建立心理负担帮助养成习惯
- **难度调节**: 支持简单/普通/困难三种摇晃难度，适应不同用户需求
- **智能统计**: 自动记录起床习惯，提供数据分析和改进建议

### 技术亮点
- **完整的MVP架构**: 包含完整的业务逻辑层、数据层和UI层
- **React Hooks最佳实践**: 使用现代React开发模式
- **传感器集成**: 深度集成设备陀螺仪进行精确摇晃检测
- **数据持久化**: 完善的本地存储和数据验证机制

## 🤝 贡献指南

这是一个完整的MVP项目，欢迎提出改进建议和bug报告。项目已开源至GitHub，欢迎Fork和贡献。

### 如何贡献
1. Fork项目到你的GitHub
2. 创建功能分支: `git checkout -b feature/AmazingFeature`
3. 提交更改: `git commit -m 'Add some AmazingFeature'`
4. 推送分支: `git push origin feature/AmazingFeature`
5. 提交Pull Request

## 📄 许可证

MIT License